(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{138:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=a(8),s=a(27),i=a(86),m=a(5),u={UI_OPEN_MODAL:"[UI] OPEN_MODAL",UI_CLOSE_MODAL:"[UI] CLOSE_MODAL",UI_SET_ERROR:"[UI] SET_ERROR",EVENT_NEW:"[EVENT] NEW",EVENT_START_NEW:"[EVENT] START_NEW",EVENT_UPDATE:"[EVENT] UPDATE",EVENT_SET_ACTIVE:"[EVENT] SET_ACTIVE",EVENT_CLEAR_ACTIVE_EVENT:"[EVENT] CLEAR_ACTIVE_EVENT",EVENT_DELETE:"[EVENT] DELETE",EVENT_LOAD:"[EVENT] LOAD",EVENT_LOGOUT:"[EVENT] LOGOUT",AUTH_LOGIN:"[AUTH] LOGIN",AUTH_LOGOUT:"[AUTH] LOGOUT",AUTH_FINISH_CHECKING_LOGIN_STATE:"[AUTH] FINISH_CHECKING_LOGIN_STATE",AUTH_START_LOGIN:"[AUTH] START_LOGIN",AUTH_START_REGISTER:"[AUTH] START_REGISTER",AUTH_START_JWT_RENEW:"[AUTH] START_JWT_RENEW"},d={modal_open:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.UI_OPEN_MODAL:return Object(m.a)(Object(m.a)({},e),{},{modal_open:!0});case u.UI_CLOSE_MODAL:return Object(m.a)(Object(m.a)({},e),{},{modal_open:!1});case u.UI_SET_ERROR:return Object(m.a)(Object(m.a)({},e),{},{error_msg:t.payload.errorMsg,input_name:t.payload.inputName});default:return e}},f=a(65),b={events:[],active_event:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.EVENT_NEW:return Object(m.a)(Object(m.a)({},e),{},{events:[t.payload].concat(Object(f.a)(e.events))});case u.EVENT_LOAD:return Object(m.a)(Object(m.a)({},e),{},{events:Object(f.a)(t.payload)});case u.EVENT_UPDATE:return Object(m.a)(Object(m.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case u.EVENT_DELETE:return Object(m.a)(Object(m.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.active_event.id})),active_event:null});case u.EVENT_SET_ACTIVE:return Object(m.a)(Object(m.a)({},e),{},{active_event:t.payload});case u.EVENT_CLEAR_ACTIVE_EVENT:return Object(m.a)(Object(m.a)({},e),{},{active_event:null});case u.EVENT_LOGOUT:return Object(m.a)({},b);default:return e}},v={checking:!0},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.AUTH_LOGIN:return Object(m.a)(Object(m.a)({},e),{},{checking:!1},t.payload);case u.AUTH_LOGOUT:return{checking:!1};case u.AUTH_FINISH_CHECKING_LOGIN_STATE:return Object(m.a)(Object(m.a)({},e),{},{checking:!1});default:return e}},N=Object(s.c)({ui:E,event:p,auth:h}),O=s.d,T=Object(s.e)(N,O(Object(s.a)(i.a))),_=a(24),g=a(10),j=a(46),w=function(e){var t=e.isAuthenticated,a=e.component,n=Object(j.a)(e,["isAuthenticated","component"]);return r.a.createElement(g.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(a,e):r.a.createElement(g.a,{to:"/auth/login"})}}))},y=function(e){var t=e.isAuthenticated,a=e.component,n=Object(j.a)(e,["isAuthenticated","component"]);return r.a.createElement(g.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(g.a,{to:"/"}):r.a.createElement(a,e)}}))},A=a(17),k=function(){return{type:u.UI_OPEN_MODAL}},S=function(e,t){return{type:u.UI_SET_ERROR,payload:{errorMsg:t,inputName:e}}},x=a(12),I=a.n(x),C=a(23),L=a(20),U=a.n(L),V="https://mern-calendar-bmend.herokuapp.com/api/",D=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(V,"/").concat(e);return"GET"===a?fetch(n):fetch(n,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(V,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===a?fetch(n,{method:a,headers:{"x-token":r}}):fetch(n,{method:a,headers:{"Content-Type":"application/json","x-token":r},body:JSON.stringify(t)})},G=a(21),H=a.n(G),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{start:H()(e.start).toDate(),end:H()(e.end).toDate()})}))},F=function(e){return{type:u.EVENT_NEW,payload:e}},W=function(e){return{type:u.EVENT_LOAD,payload:e}},M=function(e){return{type:u.EVENT_UPDATE,payload:e}},J=function(){return{type:u.EVENT_DELETE}},K=function(){return{type:u.EVENT_CLEAR_ACTIVE_EVENT}},q=a(64),z=(a(100),a(25)),B=a(26),Q=function(){var e=Object(l.b)();return r.a.createElement("button",{className:"btn btn-danger fab-danger",onClick:function(){return e(function(){var e=Object(C.a)(I.a.mark((function e(t,a){var n,r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a().event.active_event.id,e.next=4,R("events/".concat(n),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:(c=e.sent).ok?t(J()):U.a.fire("Error",null===c||void 0===c?void 0:c.msg,"error"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}())}},r.a.createElement(z.a,{icon:B.d,size:"lg"}))},X=function(){return{type:u.AUTH_FINISH_CHECKING_LOGIN_STATE}},Y=function(){return function(e){localStorage.clear(),e({type:u.EVENT_LOGOUT}),e(Z())}},Z=function(){return{type:u.AUTH_LOGOUT}},$=function(e){return{type:u.AUTH_LOGIN,payload:e}},ee=function(){var e=Object(l.c)((function(e){return e.auth})).name,t=Object(l.b)();return r.a.createElement("div",{className:"navbar navbar-dark bg-dark mb-4"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("small",{className:"d-block"},"Welcome"),r.a.createElement("span",{className:"font-weight-bold h3"},e)),r.a.createElement("button",{className:"btn btn-outline-light p-2",onClick:function(){return t(Y())}},r.a.createElement(z.a,{icon:B.c}),r.a.createElement("span",{className:"ml-1 font-weight-bold"},"Sign Out")))},te=function(e){var t=e.event,a=t.title,n=t.user.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"font-weight-bold d-block"},a),r.a.createElement("span",{className:"d-block my-1"},"\u2014 ",n))},ae=a(31),ne=a(61),re=a.n(ne),ce=a(62),oe=a.n(ce),le=(a(138),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}});re.a.setAppElement("#root");var se=H()().minutes(0).seconds(0).add(1,"hour"),ie=se.clone().add(1,"hour"),me={title:"",notes:"",start:se.toDate(),end:ie.toDate()},ue=function(){var e=Object(n.useState)(!0),t=Object(A.a)(e,2),a=t[0],c=t[1],o=Object(l.c)((function(e){return e.ui})).modal_open,s=Object(l.c)((function(e){return e.event})).active_event,i=Object(l.b)(),d=Object(n.useState)(me),E=Object(A.a)(d,2),f=E[0],b=E[1],p=f.notes,v=f.title,h=f.start,N=f.end;Object(n.useEffect)((function(){b(s||me)}),[s]);var O=function(e){var t=e.target;b(Object(m.a)(Object(m.a)({},f),{},Object(ae.a)({},t.name,t.value)))},T=function(){i({type:u.UI_CLOSE_MODAL}),i(K()),b(me)};return r.a.createElement(re.a,{className:"modal rounded-lg",overlayClassName:"modal--background",isOpen:o,onRequestClose:T,closeTimeoutMS:200,style:le},r.a.createElement("h1",{className:"text-center font-weight-bold"},s?"Edit Event":"New Event"),r.a.createElement("hr",null),r.a.createElement("form",{className:"container",onSubmit:function(e){e.preventDefault();var t,a=H()(h),n=H()(N);a.isSameOrAfter(n)?U.a.fire("Wait!","The end date must be higher than the start date","error"):v.trim().length<2?c(!1):(c(!0),i(s?function(e){return function(){var t=Object(C.a)(I.a.mark((function t(a){var n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R("events/".concat(e.id),e,"PUT");case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,r.ok?a(M(e)):U.a.fire("Error",null===r||void 0===r?void 0:r.msg,"error"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(f):(t=f,function(){var e=Object(C.a)(I.a.mark((function e(a,n){var r,c,o,l,s,i,m,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n().auth,c=r.u_id,o=r.name,e.next=4,R("events",t,"POST");case 4:return l=e.sent,e.next=7,l.json();case 7:s=e.sent,i=s.ok,m=s.event,u=m.id,i?(m.id=u,m.user={u_id:c,name:o},a(F(m))):U.a.fire("Error",null===s||void 0===s?void 0:s.msg,"error"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}())),T())}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold"},"Start Date and Time"),r.a.createElement(oe.a,{className:"form-control",onChange:function(e){return b(Object(m.a)(Object(m.a)({},f),{},{start:e}))},value:h,name:"start_date"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold"},"End Date and Time"),r.a.createElement(oe.a,{className:"form-control",onChange:function(e){return b(Object(m.a)(Object(m.a)({},f),{},{end:e}))},minDate:h,value:N,name:"end_date"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"title"},"Event Title"),r.a.createElement("input",{className:"form-control ".concat(!a&&"is-invalid"),type:"text",id:"title",name:"title",autoComplete:"off",value:v,onChange:O}),r.a.createElement("small",{className:"form-text text-muted"},"A short description")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"notes"},"Event Notes"),r.a.createElement("textarea",{className:"form-control",rows:"5",id:"notes",name:"notes",value:p,onChange:O}),r.a.createElement("small",{className:"form-text text-muted"},"Aditional information")),r.a.createElement("button",{className:"btn btn-outline-dark btn-block my-4 p-2"},r.a.createElement(z.a,{icon:B.b}),r.a.createElement("span",{className:"ml-1 font-weight-bold"},"Save"))))},de=function(){var e=Object(l.b)();return r.a.createElement("button",{className:"btn btn-primary fab",onClick:function(){return e(k())}},r.a.createElement(z.a,{icon:B.a,size:"lg"}))},Ee=Object(q.b)(H.a),fe=function(){var e=Object(n.useState)(localStorage.getItem("lastView")||"month"),t=Object(A.a)(e,2),a=t[0],c=t[1],o=Object(l.b)(),s=Object(l.c)((function(e){return e.event})),i=s.events,m=s.active_event,d=Object(l.c)((function(e){return e.auth})).u_id;return Object(n.useEffect)((function(){o(function(){var e=Object(C.a)(I.a.mark((function e(t){var a,n,r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R("events");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=n.events,c=P(r),t(W(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),r.a.createElement("div",{className:"calendar-screen"},r.a.createElement(ee,null),r.a.createElement(q.a,{localizer:Ee,events:i,startAccessor:"start",endAccessor:"end",eventPropGetter:function(e,t,a,n){return{style:{backgroundColor:d===e.user._id?"#367cf7":"#465660",borderRadius:0,border:"none",opacity:.8,display:"block",color:"#fff"}}},onDoubleClickEvent:function(){return o(k())},onSelectEvent:function(e){return o(function(e){return{type:u.EVENT_SET_ACTIVE,payload:e}}(e))},onSelectSlot:function(){return o(K())},selectable:!0,onView:function(e){c(e),localStorage.setItem("lastView",e)},view:a,components:{event:te}}),r.a.createElement(de,null),m&&r.a.createElement(Q,null),r.a.createElement(ue,null))},be=a(14),pe=a.n(be),ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(A.a)(t,2),r=a[0],c=a[1],o=function(){return c(e)},l=function(e){var t=e.target;return c(Object(m.a)(Object(m.a)({},r),{},Object(ae.a)({},t.name,t.value)))};return[r,l,o]},he=function(){var e=ve({name:"",email:"",password:"",confirm_password:""}),t=Object(A.a)(e,2),a=t[0],n=t[1],c=Object(l.c)((function(e){return e.ui})),o=c.error_msg,s=c.input_name,i=a.name,m=a.email,u=a.password,d=a.confirm_password,E=Object(l.b)();return r.a.createElement("main",{className:"min-vh-100 d-flex align-items-center"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"card-body border rounded-lg"},r.a.createElement("h1",{className:"font-weight-bold mb-4"},"Sign Up"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),pe.a.isEmpty(i)?E(S("name","Name can't be empty")):pe.a.isAlpha(i)?pe.a.isEmail(m)&&!pe.a.isEmpty(m)?pe.a.isLength(u,{min:6})&&!pe.a.isEmpty(u)?pe.a.equals(u,d)?(E(S(null,null)),E(function(e,t,a){return function(){var n=Object(C.a)(I.a.mark((function n(r){var c,o,l,s,i,m;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D("auth/register",{name:e,email:t,password:a},"POST");case 2:return c=n.sent,n.next=5,c.json();case 5:o=n.sent,l=o.ok,s=o.token,i=o.name,m=o.u_id,l?(localStorage.setItem("token",s),localStorage.setItem("token-init-date",(new Date).getTime()),r($({name:i,u_id:m}))):U.a.fire("Error",null===o||void 0===o?void 0:o.msg,"error");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,m,u))):E(S("confirm_password","Passwords are not equal")):E(S("password","Passwords must be 6 characters long")):E(S("email","Please type a valid email")):E(S("name","Names can only contain letters"))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",className:"name"===s?"form-control text-muted is-invalid":"form-control text-muted",placeholder:"John",value:i,onChange:n}),"name"===s&&r.a.createElement("div",{className:"invalid-feedback"},o)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",className:"email"===s?"form-control text-muted is-invalid":"form-control text-muted",placeholder:"john@example.com",value:m,onChange:n}),"email"===s&&r.a.createElement("div",{className:"invalid-feedback"},o)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"password"===s?"form-control text-muted is-invalid":"form-control text-muted",value:u,onChange:n}),"password"===s&&r.a.createElement("div",{className:"invalid-feedback"},o))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"confirm_password"},"Confirm Password"),r.a.createElement("input",{type:"password",id:"confirm_password",name:"confirm_password",className:"confirm_password"===s?"form-control text-muted is-invalid":"form-control text-muted",value:d,onChange:n}),"confirm_password"===s&&r.a.createElement("div",{className:"invalid-feedback"},o)))),r.a.createElement("button",{className:"btn btn-outline-dark font-weight-bold btn-block mt-2 p-2"},"Sign Up")),r.a.createElement(_.b,{className:"mt-5 d-block font-weight-bold text-dark",to:"/auth/login"},"Have an account already?"))))))},Ne=function(){var e=ve({email:"",password:""}),t=Object(A.a)(e,2),a=t[0],n=t[1],c=Object(l.c)((function(e){return e.ui})),o=c.error_msg,s=c.input_name,i=Object(l.b)(),m=a.email,u=a.password;return r.a.createElement("main",{className:"min-vh-100 d-flex align-items-center"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement("div",{className:"card-body border rounded-lg"},r.a.createElement("h1",{className:"font-weight-bold mb-4"},"Sign In"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),pe.a.isEmail(m)&&!pe.a.isEmpty(m)?pe.a.isLength(u,{min:6})&&!pe.a.isEmpty(u)?(i(S(null,null)),i(function(e,t){return function(){var a=Object(C.a)(I.a.mark((function a(n){var r,c,o,l,s,i;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D("auth",{email:e,password:t},"POST");case 2:return r=a.sent,a.next=5,r.json();case 5:c=a.sent,o=c.ok,l=c.token,s=c.name,i=c.u_id,o?(localStorage.setItem("token",l),localStorage.setItem("token-init-date",(new Date).getTime()),n($({name:s,u_id:i}))):U.a.fire("Error",null===c||void 0===c?void 0:c.msg,"error");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(m,u))):i(S("password","Passwords must be 6 characters long")):i(S("email","Please type a valid email"))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",className:"email"===s?"form-control text-muted is-invalid":"form-control text-muted",placeholder:"john@example.com",value:m,onChange:n}),"email"===s&&r.a.createElement("div",{className:"invalid-feedback"},o)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label-sm font-weight-bold",htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"password"===s?"form-control text-muted is-invalid":"form-control text-muted",value:u,onChange:n}),"password"===s&&r.a.createElement("div",{className:"invalid-feedback"},o)),r.a.createElement("button",{className:"btn btn-outline-dark font-weight-bold btn-block mt-4 p-2"},"Sign In")),r.a.createElement(_.b,{className:"mt-5 d-block font-weight-bold text-dark",to:"/auth/register"},"Don't have an account?"))))))},Oe=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/auth/login",component:Ne}),r.a.createElement(g.b,{exact:!0,path:"/auth/register",component:he}),r.a.createElement(g.a,{to:"/auth/login"}))},Te=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth})),a=t.checking,c=t.u_id;return Object(n.useEffect)((function(){e(function(){var e=Object(C.a)(I.a.mark((function e(t){var a,n,r,c,o,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("auth/renew");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.ok,c=n.token,o=n.name,l=n.u_id,r?(localStorage.setItem("token",c),localStorage.setItem("token-init-date",(new Date).getTime()),t($({name:o,u_id:l}))):t(X());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?r.a.createElement("h5",null,"Wait..."):r.a.createElement(_.a,null,r.a.createElement(g.d,null,r.a.createElement(y,{isAuthenticated:!!c,component:Oe,path:"/auth"}),r.a.createElement(w,{exact:!0,isAuthenticated:!!c,component:fe,path:"/"}),r.a.createElement(g.a,{to:"/"})))},_e=function(){return r.a.createElement(l.a,{store:T},r.a.createElement(Te,null))};a(214);o.a.render(r.a.createElement(_e,null),document.getElementById("root"))},89:function(e,t,a){e.exports=a(215)}},[[89,1,2]]]);
//# sourceMappingURL=main.4f37c2d6.chunk.js.map